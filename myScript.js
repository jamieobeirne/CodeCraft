// Translations Object
const translations = {
    en: {
        nav: {
            home: "Home",
            testimonials: "Testimonials",
            portfolio: "Portfolio",
            about: "About"
        },
        hero: {
            title: "Get your excellent project noticed!",
            greeting: "jamie@codecraft:~$ Hi! I'm Jamie. I build cool stuff on the web.",
            description: "I am here to help you get the digital attention that your awesome work deserves.",
            getInTouch: "Get In Touch",
            learnMore: "Learn More"
        },
        categories: {
            music: "Music",
            painting: "Painting",
            writing: "Writing",
            photography: "Photography",
            mondrian: "Mondrian"
        },
        skills: {
            title: "Skills & Technologies",
            html5: "Semantic markup and accessibility",
            css3: "Modern styling and animations",
            javascript: "Interactive and dynamic experiences",
            react: "Component-based UI development",
            nodejs: "Server-side development",
            git: "Version control and collaboration"
        },
        projects: {
            title: "Featured Projects",
            project1: {
                title: "E-Commerce Platform",
                description: "Full-stack e-commerce solution with modern UI and secure payment integration."
            },
            project2: {
                placeholder: "Project 2",
                title: "Task Management App",
                description: "Collaborative task management tool with real-time updates and team features."
            },
            project3: {
                placeholder: "Project 3",
                title: "Portfolio Website",
                description: "Beautiful and responsive portfolio showcasing creative work and skills."
            }
        },
        contact: {
            title: "Get In Touch",
            description: "I'm always open to discussing new projects and opportunities."
        },
        footer: {
            rights: "All rights reserved."
        },
        about: {
            title: "About Me",
            subtitle: "Passionate Web Developer Creating Digital Experiences",
            paragraph1: "Hello! I'm John Doe, a passionate web developer with over 5 years of experience in creating beautiful, functional, and user-friendly websites. I specialize in modern web technologies and have a keen eye for design and user experience.",
            paragraph2: "My journey in web development started with curiosity about how websites work, and it has evolved into a full-fledged career where I get to solve complex problems and bring creative ideas to life through code.",
            paragraph3: "When I'm not coding, you can find me exploring new technologies, contributing to open-source projects, or sharing knowledge with the developer community. I believe in continuous learning and staying updated with the latest trends in web development.",
            stats: {
                projects: "Projects Completed",
                clients: "Happy Clients",
                experience: "Years Experience"
            },
            experience: {
                title: "Experience & Education",
                job1: {
                    title: "Senior Web Developer",
                    description: "Leading development of web applications and mentoring junior developers. Collaborating with cross-functional teams to deliver high-quality software solutions."
                },
                job2: {
                    title: "Web Developer",
                    description: "Developed responsive websites and web applications for various clients. Worked with modern frameworks and maintained high code quality standards."
                },
                education: {
                    title: "Bachelor of Science in Computer Science",
                    description: "Graduated with honors. Focused on web development, software engineering, and human-computer interaction. Active member of the coding club."
                }
            },
            values: {
                title: "My Values",
                innovation: {
                    title: "Innovation",
                    description: "Always exploring new technologies and creative solutions to solve problems."
                },
                passion: {
                    title: "Passion",
                    description: "Genuine love for coding and creating digital experiences that make a difference."
                },
                collaboration: {
                    title: "Collaboration",
                    description: "Believing in the power of teamwork and open communication to achieve great results."
                },
                growth: {
                    title: "Growth",
                    description: "Continuously learning and improving to stay at the forefront of web development."
                }
            }
        },
        testimonials: {
            title: "Client Testimonials",
            subtitle: "What clients say about working with me",
            testimonial1: "\"John delivered an exceptional e-commerce platform that exceeded our expectations. His attention to detail and technical expertise made the entire process smooth and enjoyable. Highly recommended!\"",
            testimonial2: "\"Working with John was a game-changer for our business. He created a beautiful, responsive website that perfectly represents our brand. Professional, reliable, and incredibly talented.\"",
            testimonial3: "\"John's technical skills are outstanding, but what really sets him apart is his communication and ability to understand our vision. The task management app he built has transformed how our team collaborates.\"",
            testimonial4: "\"Exceptional developer with a keen eye for design. John consistently delivers high-quality work on time and within budget. He's become our go-to developer for all web projects.\"",
            testimonial5: "\"John took our rough ideas and turned them into a polished, professional website. His expertise in modern web technologies is evident in every line of code. Truly a pleasure to work with!\"",
            testimonial6: "\"Professional, skilled, and results-driven. John's portfolio speaks for itself, and working with him confirmed everything. He's a top-tier developer who understands both the technical and business sides of web development.\""
        }
    },
    es: {
        nav: {
            home: "Inicio",
            testimonials: "Testimonios",
            portfolio: "Portafolio",
            about: "Acerca de"
        },
        hero: {
            title: "¡Haz que tu excelente proyecto destaque!",
            greeting: "jamie@codecraft:~$ ¡Hola! Soy Jamie. Construyo cosas geniales en la web.",
            description: "Estoy aquí para ayudarte a conseguir la atención digital que tu increíble trabajo merece.",
            getInTouch: "Contáctame",
            learnMore: "Saber Más"
        },
        categories: {
            music: "Música",
            painting: "Pintura",
            writing: "Escritura",
            photography: "Fotografía",
            mondrian: "Mondrian"
        },
        skills: {
            title: "Habilidades y Tecnologías",
            html5: "Marcado semántico y accesibilidad",
            css3: "Estilos modernos y animaciones",
            javascript: "Experiencias interactivas y dinámicas",
            react: "Desarrollo de UI basado en componentes",
            nodejs: "Desarrollo del lado del servidor",
            git: "Control de versiones y colaboración"
        },
        projects: {
            title: "Proyectos Destacados",
            project1: {
                title: "Plataforma E-Commerce",
                description: "Solución de comercio electrónico full-stack con interfaz moderna e integración segura de pagos."
            },
            project2: {
                placeholder: "Proyecto 2",
                title: "Aplicación de Gestión de Tareas",
                description: "Herramienta colaborativa de gestión de tareas con actualizaciones en tiempo real y funciones de equipo."
            },
            project3: {
                placeholder: "Proyecto 3",
                title: "Sitio Web de Portafolio",
                description: "Portafolio hermoso y responsivo que muestra trabajos creativos y habilidades."
            }
        },
        contact: {
            title: "Contáctame",
            description: "Siempre estoy abierto a discutir nuevos proyectos y oportunidades."
        },
        footer: {
            rights: "Todos los derechos reservados."
        },
        about: {
            title: "Acerca de Mí",
            subtitle: "Desarrollador Web Apasionado Creando Experiencias Digitales",
            paragraph1: "¡Hola! Soy John Doe, un desarrollador web apasionado con más de 5 años de experiencia creando sitios web hermosos, funcionales y fáciles de usar. Me especializo en tecnologías web modernas y tengo un buen ojo para el diseño y la experiencia de usuario.",
            paragraph2: "Mi viaje en el desarrollo web comenzó con la curiosidad sobre cómo funcionan los sitios web, y ha evolucionado hasta convertirse en una carrera completa donde puedo resolver problemas complejos y dar vida a ideas creativas a través del código.",
            paragraph3: "Cuando no estoy programando, puedes encontrarme explorando nuevas tecnologías, contribuyendo a proyectos de código abierto o compartiendo conocimientos con la comunidad de desarrolladores. Creo en el aprendizaje continuo y mantenerme actualizado con las últimas tendencias en desarrollo web.",
            stats: {
                projects: "Proyectos Completados",
                clients: "Clientes Satisfechos",
                experience: "Años de Experiencia"
            },
            experience: {
                title: "Experiencia y Educación",
                job1: {
                    title: "Desarrollador Web Senior",
                    description: "Liderando el desarrollo de aplicaciones web y mentoría de desarrolladores junior. Colaborando con equipos multifuncionales para entregar soluciones de software de alta calidad."
                },
                job2: {
                    title: "Desarrollador Web",
                    description: "Desarrollé sitios web y aplicaciones web responsivas para varios clientes. Trabajé con frameworks modernos y mantuve altos estándares de calidad de código."
                },
                education: {
                    title: "Licenciatura en Ciencias de la Computación",
                    description: "Graduado con honores. Enfocado en desarrollo web, ingeniería de software e interacción humano-computadora. Miembro activo del club de programación."
                }
            },
            values: {
                title: "Mis Valores",
                innovation: {
                    title: "Innovación",
                    description: "Siempre explorando nuevas tecnologías y soluciones creativas para resolver problemas."
                },
                passion: {
                    title: "Pasión",
                    description: "Amor genuino por la programación y crear experiencias digitales que marcan la diferencia."
                },
                collaboration: {
                    title: "Colaboración",
                    description: "Creer en el poder del trabajo en equipo y la comunicación abierta para lograr grandes resultados."
                },
                growth: {
                    title: "Crecimiento",
                    description: "Aprendiendo y mejorando continuamente para mantenerse a la vanguardia del desarrollo web."
                }
            }
        },
        testimonials: {
            title: "Testimonios de Clientes",
            subtitle: "Lo que dicen los clientes sobre trabajar conmigo",
            testimonial1: "\"John entregó una plataforma de comercio electrónico excepcional que superó nuestras expectativas. Su atención al detalle y experiencia técnica hicieron que todo el proceso fuera fluido y agradable. ¡Altamente recomendado!\"",
            testimonial2: "\"Trabajar con John fue un cambio radical para nuestro negocio. Creó un sitio web hermoso y responsivo que representa perfectamente nuestra marca. Profesional, confiable e increíblemente talentoso.\"",
            testimonial3: "\"Las habilidades técnicas de John son excepcionales, pero lo que realmente lo distingue es su comunicación y capacidad para entender nuestra visión. La aplicación de gestión de tareas que construyó ha transformado cómo colabora nuestro equipo.\"",
            testimonial4: "\"Desarrollador excepcional con un buen ojo para el diseño. John entrega consistentemente trabajo de alta calidad a tiempo y dentro del presupuesto. Se ha convertido en nuestro desarrollador de referencia para todos los proyectos web.\"",
            testimonial5: "\"John tomó nuestras ideas aproximadas y las convirtió en un sitio web pulido y profesional. Su experiencia en tecnologías web modernas es evidente en cada línea de código. ¡Realmente un placer trabajar con él!\"",
            testimonial6: "\"Profesional, hábil y orientado a resultados. El portafolio de John habla por sí solo, y trabajar con él confirmó todo. Es un desarrollador de primer nivel que entiende tanto los aspectos técnicos como comerciales del desarrollo web.\""
        }
    },
    ca: {
        nav: {
            home: "Inici",
            testimonials: "Testimonis",
            portfolio: "Portafoli",
            about: "Sobre mi"
        },
        hero: {
            title: "Fes que el teu excel·lent projecte destaqui!",
            greeting: "jamie@codecraft:~$ Hola! Sóc Jamie. Construeixo coses genials a la web.",
            description: "Sóc aquí per ajudar-te a aconseguir l'atenció digital que el teu increïble treball mereix.",
            getInTouch: "Contacta'm",
            learnMore: "Saber Més"
        },
        categories: {
            music: "Música",
            painting: "Pintura",
            writing: "Escriptura",
            photography: "Fotografia",
            mondrian: "Mondrian"
        },
        skills: {
            title: "Habilitats i Tecnologies",
            html5: "Marcat semàntic i accessibilitat",
            css3: "Estils moderns i animacions",
            javascript: "Experiències interactives i dinàmiques",
            react: "Desenvolupament d'interfície d'usuari basat en components",
            nodejs: "Desenvolupament del costat del servidor",
            git: "Control de versions i col·laboració"
        },
        projects: {
            title: "Projectes Destacats",
            project1: {
                title: "Plataforma E-Commerce",
                description: "Solució de comerç electrònic full-stack amb interfície moderna i integració segura de pagaments."
            },
            project2: {
                placeholder: "Projecte 2",
                title: "Aplicació de Gestió de Tasques",
                description: "Eina col·laborativa de gestió de tasques amb actualitzacions en temps real i funcions d'equip."
            },
            project3: {
                placeholder: "Projecte 3",
                title: "Lloc Web de Portafoli",
                description: "Portafoli bonic i responsiu que mostra treballs creatius i habilitats."
            }
        },
        contact: {
            title: "Contacta'm",
            description: "Sempre estic obert a discutir nous projectes i oportunitats."
        },
        footer: {
            rights: "Tots els drets reservats."
        },
        about: {
            title: "Sobre mi",
            subtitle: "Desenvolupador Web Apassionat Creant Experiències Digitals",
            paragraph1: "Hola! Sóc John Doe, un desenvolupador web apassionat amb més de 5 anys d'experiència creant llocs web bonics, funcionals i fàcils d'usar. M'especialitzo en tecnologies web modernes i tinc un bon ull per al disseny i l'experiència d'usuari.",
            paragraph2: "El meu viatge en el desenvolupament web va començar amb la curiositat sobre com funcionen els llocs web, i ha evolucionat fins a convertir-se en una carrera completa on puc resoldre problemes complexos i donar vida a idees creatives a través del codi.",
            paragraph3: "Quan no estic programant, em pots trobar explorant noves tecnologies, contribuint a projectes de codi obert o compartint coneixements amb la comunitat de desenvolupadors. Crec en l'aprenentatge continu i mantenir-me actualitzat amb les últimes tendències en desenvolupament web.",
            stats: {
                projects: "Projectes Completats",
                clients: "Clients Satisfets",
                experience: "Anys d'Experiència"
            },
            experience: {
                title: "Experiència i Educació",
                job1: {
                    title: "Desenvolupador Web Sènior",
                    description: "Liderant el desenvolupament d'aplicacions web i mentorització de desenvolupadors júnior. Col·laborant amb equips multifuncionals per lliurar solucions de programari d'alta qualitat."
                },
                job2: {
                    title: "Desenvolupador Web",
                    description: "Vaig desenvolupar llocs web i aplicacions web responsives per a diversos clients. Vaig treballar amb frameworks moderns i vaig mantenir alts estàndards de qualitat de codi."
                },
                education: {
                    title: "Llicenciatura en Ciències de la Computació",
                    description: "Graduat amb honors. Enfocat en desenvolupament web, enginyeria de programari i interacció home-ordinador. Membre actiu del club de programació."
                }
            },
            values: {
                title: "Els Meus Valors",
                innovation: {
                    title: "Innovació",
                    description: "Sempre explorant noves tecnologies i solucions creatives per resoldre problemes."
                },
                passion: {
                    title: "Passió",
                    description: "Amor genuí per la programació i crear experiències digitals que fan la diferència."
                },
                collaboration: {
                    title: "Col·laboració",
                    description: "Creure en el poder del treball en equip i la comunicació oberta per aconseguir grans resultats."
                },
                growth: {
                    title: "Creixement",
                    description: "Aprenent i millorant contínuament per mantenir-se a l'avantguarda del desenvolupament web."
                }
            }
        },
        testimonials: {
            title: "Testimonis de Clients",
            subtitle: "El que diuen els clients sobre treballar amb mi",
            testimonial1: "\"John va lliurar una plataforma de comerç electrònic excepcional que va superar les nostres expectatives. La seva atenció al detall i experiència tècnica van fer que tot el procés fos fluid i agradable. Altament recomanat!\"",
            testimonial2: "\"Treballar amb John va ser un canvi radical per al nostre negoci. Va crear un lloc web bonic i responsiu que representa perfectament la nostra marca. Professional, fiable i increïblement talentós.\"",
            testimonial3: "\"Les habilitats tècniques de John són excepcionals, però el que realment el distingeix és la seva comunicació i capacitat per entendre la nostra visió. L'aplicació de gestió de tasques que va construir ha transformat com col·labora el nostre equip.\"",
            testimonial4: "\"Desenvolupador excepcional amb un bon ull per al disseny. John lliura consistentment treball d'alta qualitat a temps i dins del pressupost. S'ha convertit en el nostre desenvolupador de referència per a tots els projectes web.\"",
            testimonial5: "\"John va prendre les nostres idees aproximades i les va convertir en un lloc web polit i professional. La seva experiència en tecnologies web modernes és evident en cada línia de codi. Realment un plaer treballar amb ell!\"",
            testimonial6: "\"Professional, hàbil i orientat a resultats. El portafoli de John parla per si sol, i treballar amb ell va confirmar tot. És un desenvolupador de primer nivell que entén tant els aspectes tècnics com comercials del desenvolupament web.\""
        }
    }
};

// Language Toggle Functionality
function setLanguage(lang) {
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Update active button state
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === lang) {
            btn.classList.add('active');
        }
    });
    
    // Get translation object for current language
    const t = translations[lang];
    
    // Function to get nested translation value
    function getTranslation(key) {
        return key.split('.').reduce((obj, k) => obj && obj[k], t);
    }
    
    // Check if there's saved content
    const savedContent = localStorage.getItem('homepageContent');
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        // If element has data-content attribute and there's saved content, skip translation
        // (saved content takes priority)
        if (savedContent && element.hasAttribute('data-content')) {
            return;
        }
        
        const key = element.getAttribute('data-i18n');
        const translation = getTranslation(key);
        if (translation) {
            // Check if element is the greeting div to preserve the blinking cursor
            if (key === 'hero.greeting') {
                element.innerHTML = translation + '<div class="blinking-cursor"></div>';
            } else {
                element.textContent = translation;
            }
        }
    });
    
    // Save language preference
    localStorage.setItem('language', lang);
}


// Theme Toggle Functionality
document.addEventListener('DOMContentLoaded', function() {
    const body = document.body;

    // Register CSS Paint API worklet for brush stroke
    if ('paintWorklet' in CSS) {
        CSS.paintWorklet.addModule('brush-stroke.js').catch(err => {
            console.warn('Failed to load brush stroke worklet:', err);
        });
    }

    // Function to reset beam opacity when switching to light theme
    function resetBeam() {
        const beam = document.querySelector('.beam');
        if (beam) {
            beam.classList.remove('fading');
            beam.style.opacity = '0';
            beam.style.animation = 'none';
            // Force reflow
            void beam.offsetWidth;
            // Clear inline styles after reflow to allow CSS to take over
            setTimeout(() => {
                beam.style.opacity = '';
                beam.style.animation = '';
            }, 50);
        }
        
        // Reset beam1 and beam2
        const beam1 = document.getElementById('beam1');
        const beam2 = document.getElementById('beam2');
        
        if (beam1) {
            beam1.style.opacity = '0';
            beam1.style.animation = 'none';
        }
        
        if (beam2) {
            beam2.style.opacity = '0';
            beam2.style.animation = 'none';
        }
    }

    // Function to trigger beam fade animation
    function triggerBeamFade() {
        const beam = document.querySelector('.beam');
        if (beam) {
            // Ensure beam starts at opacity 0
            beam.style.opacity = '0';
            beam.classList.remove('fading');
            
            // Force reflow to ensure reset
            void beam.offsetWidth;
            
            // Clear inline opacity so animation can control it
            beam.style.opacity = '';
            
            // Add animation class to restart animation
            requestAnimationFrame(() => {
                beam.classList.add('fading');
            });
            
            // Remove class after animation completes (1.75 seconds)
            setTimeout(() => {
                beam.classList.remove('fading');
            }, 1750);
        }
        
        // Trigger fade-in for beam1 and beam2
        const beam1 = document.getElementById('beam1');
        const beam2 = document.getElementById('beam2');
        
        if (beam1) {
            beam1.style.opacity = '0';
            beam1.style.animation = 'none';
            void beam1.offsetWidth; // Force reflow
            beam1.style.animation = '';
            requestAnimationFrame(() => {
                beam1.style.animation = 'beamFadeIn 0.75s ease-in-out forwards';
            });
        }
        
        if (beam2) {
            beam2.style.opacity = '0';
            beam2.style.animation = 'none';
            void beam2.offsetWidth; // Force reflow
            beam2.style.animation = '';
            requestAnimationFrame(() => {
                beam2.style.animation = 'beamFadeIn 0.75s ease-in-out forwards';
            });
        }
    }

    // Check for saved theme preference or default to dark theme
    const savedTheme = localStorage.getItem('theme') || 'dark';
    
    // Apply saved theme
    if (savedTheme === 'light') {
        body.classList.remove('dark-theme');
        body.classList.add('light-theme');
        resetBeam();
    } else {
        body.classList.remove('light-theme');
        body.classList.add('dark-theme');
        triggerBeamFade();
    }

    // Lamp SVG toggle functionality - only the light group is clickable
    const lightGroup = document.getElementById('light');
    const lampSvg = document.getElementById('lampSvg');
    
    // Function to toggle theme
    function toggleTheme() {
        // Toggle between light and dark themes
        if (body.classList.contains('dark-theme')) {
            // Switch to light theme
            body.classList.remove('dark-theme');
            body.classList.add('light-theme');
            localStorage.setItem('theme', 'light');
            resetBeam();
            
            // Add brightness animation effect
            createBrightnessEffect();
        } else {
            // Switch to dark theme
            body.classList.remove('light-theme');
            body.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
            triggerBeamFade();
        }
    }
    
    if (lightGroup) {
        // Force pointer events on the light group
        lightGroup.style.pointerEvents = 'auto';
        lightGroup.style.cursor = 'pointer';
        lightGroup.setAttribute('style', lightGroup.getAttribute('style') + '; pointer-events: auto !important; cursor: pointer !important;');
        
        // Add click event to the group
        lightGroup.addEventListener('click', function(event) {
            event.preventDefault();
            event.stopPropagation();
            toggleTheme();
            return false;
        });
        
        // Add touch event for mobile devices
        lightGroup.addEventListener('touchend', function(event) {
            event.preventDefault();
            event.stopPropagation();
            toggleTheme();
            return false;
        });
        
        // Also make the SVG itself clickable as a fallback
        if (lampSvg) {
            lampSvg.style.pointerEvents = 'auto';
            lampSvg.addEventListener('click', function(event) {
                // Only trigger if clicking on the light group area
                const rect = lightGroup.getBoundingClientRect();
                const x = event.clientX;
                const y = event.clientY;
                if (x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom) {
                    event.preventDefault();
                    event.stopPropagation();
                    toggleTheme();
                }
            });
        }
        
        // Ensure all child elements are also clickable
        const lightChildren = lightGroup.querySelectorAll('*');
        lightChildren.forEach(child => {
            child.style.pointerEvents = 'auto';
            child.style.cursor = 'pointer';
            child.addEventListener('click', function(event) {
                event.preventDefault();
                event.stopPropagation();
                toggleTheme();
                return false;
            });
            child.addEventListener('touchend', function(event) {
                event.preventDefault();
                event.stopPropagation();
                toggleTheme();
                return false;
            });
        });
    }

    // Function to create brightness/lighting effect
    function createBrightnessEffect() {
        // Create overlay element for lighting effect
        const overlay = document.createElement('div');
        overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            animation: brightnessPulse 1.5s ease-out;
        `;
        
        // Add animation keyframes
        if (!document.getElementById('brightness-animation')) {
            const style = document.createElement('style');
            style.id = 'brightness-animation';
            style.textContent = `
                @keyframes brightnessPulse {
                    0% {
                        opacity: 0;
                        transform: scale(0.8);
                    }
                    50% {
                        opacity: 1;
                        transform: scale(1.2);
                    }
                    100% {
                        opacity: 0;
                        transform: scale(1.5);
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(overlay);
        
        // Remove overlay after animation
        setTimeout(() => {
            overlay.remove();
        }, 1500);
    }

    // Function to create ripple effect on button click
    function createRippleEffect(button, event) {
        const ripple = document.createElement('span');
        const rect = button.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;
        
        ripple.style.cssText = `
            position: absolute;
            width: ${size}px;
            height: ${size}px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            left: ${x}px;
            top: ${y}px;
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
        `;
        
        button.style.position = 'relative';
        button.style.overflow = 'hidden';
        button.appendChild(ripple);
        
        // Add ripple animation if not already added
        if (!document.getElementById('ripple-animation')) {
            const style = document.createElement('style');
            style.id = 'ripple-animation';
            style.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(2);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        setTimeout(() => {
            ripple.remove();
        }, 600);
    }

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href !== '#' && href !== '') {
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }
        });
    });

    // Add fade-in animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe elements for animation
    document.querySelectorAll('.testimonial-card, .value-card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });

    // Language Toggle Event Listeners
    const langButtons = document.querySelectorAll('.lang-btn');
    langButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.dataset.lang;
            setLanguage(lang);
        });
    });

    // Load saved language preference or default to English
    const savedLanguage = localStorage.getItem('language') || 'en';
    setLanguage(savedLanguage);

    // Typing Animation for Writing Section
    const typedTextElement = document.querySelector('.typed-text');
    if (typedTextElement) {
        const texts = ['Creating stories...', 'Writing novels...', 'Crafting words...'];
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        function typeText() {
            const currentText = texts[textIndex];
            
            if (isDeleting) {
                typedTextElement.textContent = currentText.substring(0, charIndex - 1);
                charIndex--;
            } else {
                typedTextElement.textContent = currentText.substring(0, charIndex + 1);
                charIndex++;
            }

            let typeSpeed = isDeleting ? 50 : 100;

            if (!isDeleting && charIndex === currentText.length) {
                typeSpeed = 2000; // Pause at end
                isDeleting = true;
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                textIndex = (textIndex + 1) % texts.length;
                typeSpeed = 500; // Pause before starting next text
            }

            setTimeout(typeText, typeSpeed);
        }

        typeText();
    }

    // Add hover effects to art options
    const artOptions = document.querySelectorAll('.art-option');
    artOptions.forEach(option => {
        option.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        option.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });

    // Hamburger menu toggle
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const navMenu = document.getElementById('navMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    
    if (hamburgerBtn && navMenu) {
        hamburgerBtn.addEventListener('click', function() {
            hamburgerBtn.classList.toggle('active');
            navMenu.classList.toggle('active');
            if (menuOverlay) {
                menuOverlay.classList.toggle('active');
            }
        });
        
        // Close menu when clicking on overlay
        if (menuOverlay) {
            menuOverlay.addEventListener('click', function() {
                hamburgerBtn.classList.remove('active');
                navMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
            });
        }
        
        // Close menu when clicking on a nav link
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                hamburgerBtn.classList.remove('active');
                navMenu.classList.remove('active');
                if (menuOverlay) {
                    menuOverlay.classList.remove('active');
                }
            });
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const isClickInsideMenu = navMenu.contains(event.target);
            const isClickOnHamburger = hamburgerBtn.contains(event.target);
            
            if (!isClickInsideMenu && !isClickOnHamburger && navMenu.classList.contains('active')) {
                hamburgerBtn.classList.remove('active');
                navMenu.classList.remove('active');
                if (menuOverlay) {
                    menuOverlay.classList.remove('active');
                }
            }
        });
    }

    // Category link click handlers for image switching
    const categoryLinks = document.querySelectorAll('.category-link');
    const guitarImage = document.getElementById('guitar-image');
    const paintingImage = document.getElementById('painting-image');
    const paintingContainer = document.querySelector('.painting-container');
    const mondrianContainer = document.querySelector('.mondrian-container');
    const writingTextContainer = document.querySelector('.writing-text-container');
    const photographyContainer = document.querySelector('.photography-container');
    const musicNotes = document.querySelectorAll('.music-note');
    const cameraSvg = document.querySelector('.camera-svg');
    const polaroidStack = document.querySelector('.polaroid-stack');

    if (cameraSvg) {
        cameraSvg.addEventListener('click', function() {
            this.classList.add('flash');
            
            // Toggle polaroid stack visibility on flash
            if (polaroidStack) {
                polaroidStack.classList.toggle('active');
            }

            setTimeout(() => {
                this.classList.remove('flash');
            }, 300);
        });
    }

    categoryLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const category = this.getAttribute('data-category');

            if (category === 'painting') {
                // Hide guitar and music notes, show painting
                if (guitarImage) {
                    guitarImage.style.display = 'none';
                }
                musicNotes.forEach(note => {
                    note.style.display = 'none';
                });
                if (paintingImage) {
                    paintingImage.style.display = 'block';
                }
                // Add active class to show brush stroke background
                if (paintingContainer) {
                    paintingContainer.classList.add('painting-active');
                }
                // Hide painting 2
                if (mondrianContainer) {
                    mondrianContainer.classList.remove('mondrian-active');
                }
                // Hide writing text
                if (writingTextContainer) {
                    writingTextContainer.classList.remove('writing-active');
                }
                // Hide photography
                if (photographyContainer) {
                    photographyContainer.classList.remove('photography-active');
                }
                // Hide polaroids when leaving photography
                if (polaroidStack) {
                    polaroidStack.classList.remove('active');
                }
            } else if (category === 'mondrian') {
                // Hide guitar and music notes, hide painting 1, show painting 2
                if (guitarImage) {
                    guitarImage.style.display = 'none';
                }
                musicNotes.forEach(note => {
                    note.style.display = 'none';
                });
                if (paintingImage) {
                    paintingImage.style.display = 'none';
                }
                if (paintingContainer) {
                    paintingContainer.classList.remove('painting-active');
                }
                // Show painting 2
                if (mondrianContainer) {
                    mondrianContainer.classList.add('mondrian-active');
                }
                // Hide writing text
                if (writingTextContainer) {
                    writingTextContainer.classList.remove('writing-active');
                }
                // Hide photography
                if (photographyContainer) {
                    photographyContainer.classList.remove('photography-active');
                }
                // Hide polaroids when leaving photography
                if (polaroidStack) {
                    polaroidStack.classList.remove('active');
                }
            } else if (category === 'music') {
                // Show guitar and music notes, hide paintings
                if (guitarImage) {
                    guitarImage.style.display = 'block';
                }
                musicNotes.forEach(note => {
                    note.style.display = 'block';
                });
                if (paintingImage) {
                    paintingImage.style.display = 'none';
                }
                // Remove active class to hide brush stroke background
                if (paintingContainer) {
                    paintingContainer.classList.remove('painting-active');
                }
                // Hide painting 2
                if (mondrianContainer) {
                    mondrianContainer.classList.remove('mondrian-active');
                }
                // Hide writing text
                if (writingTextContainer) {
                    writingTextContainer.classList.remove('writing-active');
                }
                // Hide photography
                if (photographyContainer) {
                    photographyContainer.classList.remove('photography-active');
                }
                // Hide polaroids when leaving photography
                if (polaroidStack) {
                    polaroidStack.classList.remove('active');
                }
            } else if (category === 'writing') {
                // Show writing text, hide everything else
                if (guitarImage) {
                    guitarImage.style.display = 'none';
                }
                musicNotes.forEach(note => {
                    note.style.display = 'none';
                });
                if (paintingImage) {
                    paintingImage.style.display = 'none';
                }
                if (paintingContainer) {
                    paintingContainer.classList.remove('painting-active');
                }
                if (mondrianContainer) {
                    mondrianContainer.classList.remove('mondrian-active');
                }
                if (writingTextContainer) {
                    writingTextContainer.classList.add('writing-active');
                }
                // Hide photography
                if (photographyContainer) {
                    photographyContainer.classList.remove('photography-active');
                }
            } else if (category === 'photography') {
                // Show photography, hide everything else
                if (guitarImage) {
                    guitarImage.style.display = 'none';
                }
                musicNotes.forEach(note => {
                    note.style.display = 'none';
                });
                if (paintingImage) {
                    paintingImage.style.display = 'none';
                }
                if (paintingContainer) {
                    paintingContainer.classList.remove('painting-active');
                }
                if (mondrianContainer) {
                    mondrianContainer.classList.remove('mondrian-active');
                }
                if (writingTextContainer) {
                    writingTextContainer.classList.remove('writing-active');
                }
                if (photographyContainer) {
                    photographyContainer.classList.add('photography-active');
                }
            } else {
                // For other categories, hide everything
                if (paintingImage) {
                    paintingImage.style.display = 'none';
                }
                if (paintingContainer) {
                    paintingContainer.classList.remove('painting-active');
                }
                if (mondrianContainer) {
                    mondrianContainer.classList.remove('mondrian-active');
                }
                if (writingTextContainer) {
                    writingTextContainer.classList.remove('writing-active');
                }
                if (photographyContainer) {
                    photographyContainer.classList.remove('photography-active');
                }
            }
        });
    });

    // Mondrian Color Cycling Animation
    const mondrianColors = [
        '#226F54',  // turf
        '667761', /* dustyOlive */
        '#B9BEA5',  // ashGrey
        '#87C38F',  // willowPurple
        '#FFFFFF',  // white
        '#000000'   // black
    ];

    const mondrianBlocks = [
        '.block-1', '.block-2', '.block-3',
        '.block-7', '.block-8', '.block-9', '.block-10'
    ];

    let currentBlockIndex = 0;

    function cycleMondrianColors() {
        const mondrianContainer = document.querySelector('.mondrian-container');
        
        // Only animate if the abstract view is active
        if (mondrianContainer && mondrianContainer.classList.contains('mondrian-active')) {
            const blockSelector = mondrianBlocks[currentBlockIndex];
            const block = document.querySelector(blockSelector);
            
            if (block) {
                // Get current color
                const currentColor = window.getComputedStyle(block).backgroundColor;
                
                // Convert RGB to hex for comparison
                const rgbToHex = (rgb) => {
                    const values = rgb.match(/\d+/g);
                    if (values) {
                        const r = parseInt(values[0]).toString(16).padStart(2, '0');
                        const g = parseInt(values[1]).toString(16).padStart(2, '0');
                        const b = parseInt(values[2]).toString(16).padStart(2, '0');
                        return `#${r}${g}${b}`.toUpperCase();
                    }
                    return null;
                };
                
                const currentHex = rgbToHex(currentColor);
                
                // Get a different random color
                let newColor;
                do {
                    newColor = mondrianColors[Math.floor(Math.random() * mondrianColors.length)];
                } while (newColor.toUpperCase() === currentHex && mondrianColors.length > 1);
                
                // Animate color change
                block.style.transition = 'background-color 0.6s ease';
                block.style.backgroundColor = newColor;
            }
            
            // Move to next block
            currentBlockIndex = (currentBlockIndex + 1) % mondrianBlocks.length;
        }
    }

    // Start the cycling animation
    setInterval(cycleMondrianColors, 2000);

});

